-- MySQL Script generated by MySQL Workbench
-- Sun May 26 08:44:21 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema Concesionario2
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema Concesionario2
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Concesionario2` DEFAULT CHARACTER SET utf8 ;
-- -----------------------------------------------------
-- Schema new_schema1
-- -----------------------------------------------------
USE `Concesionario2` ;

-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_ciudad`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_ciudad` (
  `idCiudad` VARCHAR(20) NOT NULL,
  `nom_ciudad` VARCHAR(100) NOT NULL,
  `estado_ciudad` VARCHAR(10) NOT NULL,
  `obs_ciudad` VARCHAR(255) NULL,
  PRIMARY KEY (`idCiudad`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_cliente` (
  `num_doc_cliente` VARCHAR(30) NOT NULL,
  `tip_doc_cliente` VARCHAR(100) NOT NULL,
  `nom_cliente` VARCHAR(50) NOT NULL,
  `ape_cliente` VARCHAR(50) NOT NULL,
  `sexo_cliente` VARCHAR(50) NOT NULL,
  `direc_cliente` VARCHAR(100) NULL,
  `tel_cliente` VARCHAR(30) NOT NULL,
  `email_cliente` VARCHAR(255) NOT NULL,
  `estado_cliente` VARCHAR(10) NOT NULL,
  `fec_nac_cliente` VARCHAR(30) NOT NULL,
  `ciudad_cliente` VARCHAR(20) NOT NULL,
  `obs_cliente` VARCHAR(255) NULL,
  INDEX `fk_cliente_ciudad_idx` (`ciudad_cliente` ASC),
  PRIMARY KEY (`num_doc_cliente`),
  CONSTRAINT `fk_cliente_ciudad`
    FOREIGN KEY (`ciudad_cliente`)
    REFERENCES `Concesionario2`.`tb_ciudad` (`idCiudad`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_marca`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_marca` (
  `idMarca` VARCHAR(20) NOT NULL,
  `nom_marca` VARCHAR(100) NOT NULL,
  `estado_marca` VARCHAR(10) NOT NULL,
  `obs_marca` VARCHAR(255) NULL,
  PRIMARY KEY (`idMarca`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_color`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_color` (
  `idColor` VARCHAR(20) NOT NULL,
  `nom_color` VARCHAR(100) NOT NULL,
  `estado_color` VARCHAR(10) NOT NULL,
  `obs_color` VARCHAR(255) NULL,
  PRIMARY KEY (`idColor`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_tipo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_tipo` (
  `idTipo` VARCHAR(20) NOT NULL,
  `nom_tipo` VARCHAR(100) NOT NULL,
  `estado_tipo` VARCHAR(10) NOT NULL,
  `obs_tipo` VARCHAR(255) NULL,
  PRIMARY KEY (`idTipo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_vehiculo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_vehiculo` (
  `placa_vehiculo` VARCHAR(15) NOT NULL,
  `ciudad_vehiculo` VARCHAR(20) NOT NULL,
  `marca_vehiculo` VARCHAR(20) NOT NULL,
  `tipo_vehiculo` VARCHAR(20) NOT NULL,
  `modelo_vehiculo` VARCHAR(10) NOT NULL,
  `color_vehiculo` VARCHAR(20) NOT NULL,
  `num_motor` VARCHAR(20) NOT NULL,
  `estado_vehiculo` VARCHAR(10) NOT NULL,
  `obs_vehiculo` VARCHAR(255) NULL,
  `cliente` VARCHAR(30) NULL,
  PRIMARY KEY (`placa_vehiculo`),
  INDEX `fk_vehiculo_ciudad_idx` (`ciudad_vehiculo` ASC),
  INDEX `fk_vehiculo_marca_idx` (`marca_vehiculo` ASC),
  INDEX `fk_vehiculo_color_idx` (`color_vehiculo` ASC),
  INDEX `fk_vehiculo_tipo_idx` (`tipo_vehiculo` ASC),
  INDEX `fk_vehiculo_cliente_idx` (`cliente` ASC),
  CONSTRAINT `fk_vehiculo_ciudad`
    FOREIGN KEY (`ciudad_vehiculo`)
    REFERENCES `Concesionario2`.`tb_ciudad` (`idCiudad`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vehiculo_marca`
    FOREIGN KEY (`marca_vehiculo`)
    REFERENCES `Concesionario2`.`tb_marca` (`idMarca`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vehiculo_color`
    FOREIGN KEY (`color_vehiculo`)
    REFERENCES `Concesionario2`.`tb_color` (`idColor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vehiculo_tipo`
    FOREIGN KEY (`tipo_vehiculo`)
    REFERENCES `Concesionario2`.`tb_tipo` (`idTipo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vehiculo_cliente`
    FOREIGN KEY (`cliente`)
    REFERENCES `Concesionario2`.`tb_cliente` (`num_doc_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_mecanico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_mecanico` (
  `idMecanico` VARCHAR(30) NOT NULL,
  `num_doc_mecanico` VARCHAR(30) NOT NULL,
  `tip_doc_mecanico` VARCHAR(100) NOT NULL,
  `nom_mecanico` VARCHAR(50) NOT NULL,
  `ape_mecanico` VARCHAR(50) NOT NULL,
  `sexo_mecanico` VARCHAR(50) NOT NULL,
  `estado_mecanico` VARCHAR(10) NOT NULL,
  `ciudad_mecanico` VARCHAR(20) NOT NULL,
  `obs_mecanico` VARCHAR(255) NULL,
  INDEX `fk_ciudad_mecanico_idx` (`ciudad_mecanico` ASC),
  PRIMARY KEY (`idMecanico`),
  CONSTRAINT `fk_ciudad_mecanico`
    FOREIGN KEY (`ciudad_mecanico`)
    REFERENCES `Concesionario2`.`tb_ciudad` (`idCiudad`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tb_orden_trabajo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tb_orden_trabajo` (
  `idOrden` INT NOT NULL DEFAULT 1001,
  `fec_orden` VARCHAR(30) NOT NULL,
  `id_cliente` VARCHAR(30) NOT NULL,
  `id_mecanico` VARCHAR(30) NOT NULL,
  `placa_vehiculo` VARCHAR(15) NOT NULL,
  `valor_orden` DECIMAL(18,2) NOT NULL,
  `estado_orden` VARCHAR(10) NOT NULL,
  `detalle_orden` VARCHAR(255) NOT NULL,
  `obs_orden` VARCHAR(255) NULL,
  PRIMARY KEY (`idOrden`),
  INDEX `fk_orden_mecanico_idx` (`id_mecanico` ASC),
  INDEX `fk_orden_vehiculo_idx` (`placa_vehiculo` ASC),
  CONSTRAINT `fk_orden_mecanico`
    FOREIGN KEY (`id_mecanico`)
    REFERENCES `Concesionario2`.`tb_mecanico` (`idMecanico`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_orden_vehiculo`
    FOREIGN KEY (`placa_vehiculo`)
    REFERENCES `Concesionario2`.`tb_vehiculo` (`placa_vehiculo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tbl_repuestos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tbl_repuestos` (
  `idRepuestos` INT NOT NULL AUTO_INCREMENT,
  `tipo` VARCHAR(45) NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(45) NOT NULL,
  `cantidad` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idRepuestos`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Concesionario2`.`tbl_orden_respuesto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Concesionario2`.`tbl_orden_respuesto` (
  `idOrdenRespuesto` INT NOT NULL AUTO_INCREMENT,
  `ordenTrabajo` INT NULL,
  `repuesto` INT NULL,
  `cantidad` INT NULL,
  PRIMARY KEY (`idOrdenRespuesto`),
  INDEX `fk_orden_repuesto_idx` (`ordenTrabajo` ASC),
  INDEX `fk_repuesto_orden_idx` (`repuesto` ASC),
  CONSTRAINT `fk_orden_repuesto`
    FOREIGN KEY (`ordenTrabajo`)
    REFERENCES `Concesionario2`.`tb_orden_trabajo` (`idOrden`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_repuesto_orden`
    FOREIGN KEY (`repuesto`)
    REFERENCES `Concesionario2`.`tbl_repuestos` (`idRepuestos`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
